<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cards Page</title>
    <link rel="stylesheet" href="myCards_styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

</head>
<body onload="getCardDetails()">
   <div class="container">
        <div class="row">
            <div class="col-xs-12 col-lg-8 my-5 m-auto shadow row">
                <h3 class="text-center py-3">OTBank Master Card</h3>
                <hr>
                <div class=" col-11 my-5 m-auto row " id="cardDetails">
                    <div class="col-xs-12 col-lg-5 pb-5">
                        <img src="./Card-front.png" alt="" style="height: 200px;" id="cardDisp"  onclick="cardInfo()">
                        <img src="./Card-back.png" alt="" style="height: 250px; display: none;"  id="cardDetails1" onclick="cardBack()">
                    </div>
                    <div class=" col-xs-12 col-lg-7"  style="display: none;" id="cardDetails2">
                        <h4> Card Details</h4>
                        <p>Card Holder : <strong id="cardName"></strong></p>
                        <p>Account Balance : <strong id="acctBal"></strong></h5>
                        <p>Card Number : <strong id="cardNum"></strong></p>
                        <p>Issue Date : <strong id="cardDate"></strong></p>
                        <p>Expiry Date : <strong id="expDate"></strong></p>
                        <p>Card ID :     <strong id="cardID"></strong></p>
                    </div>
                </div>

                <hr>
                <a href="userDashboardPage.html" class="btn btn-secondary fw-bold">Back to dashboard</a>
                <hr>
            </div>
        </div>
   </div>


    <script>
        const cardInfo=()=>{
            cardDisp.style.display = "none"
            cardDetails1.style.display = "block"
            cardDetails2.style.display = "block"
        }
        const cardBack=()=>{
            cardDisp.style.display = "block"
            cardDetails1.style.display = "none"
            cardDetails2.style.display = "none"
        }

        const getCardDetails=()=>{  
            let allUsers = JSON.parse(localStorage.getItem("localStUsers"))
            let customerIndex = localStorage.getItem("customerIndex")
            if (customerIndex) { 
                allUsers = JSON.parse(localStorage.getItem("localStUsers")) 
                allUsers.map((users, index)=>{
                    if (index==customerIndex) {
                        cardName.innerText = ` ${users.firstName}  ${users.lastName}`
                        acctBal.innerText = ` $${users.accountBalance} `
                        cardNum.innerText = ` ${users.cardNumber}`
                        cardDate.innerText = ` ${users.cardIssueDate}`
                        expDate.innerText = ` ${users.cardExpDate}`
                        cardID.innerText = ` ${users.cardIDNumber}`
                    }
                })
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
</body>
</html>