<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign-In Page</title>
    <link rel="stylesheet" href="signIn_styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

    <script src="https://use.fontawesome.com/3c538cc85f.js"></script>
</head>
<body>
    
    <div id="mybox"  class="mt-5 m-auto p-3 rounded-4">
        <h3 class="text-center" style="color:#40196D">Welcome,</h3>
        <h6 class="text-center" style="color:#40196D">Enter your email and password to Sign-in</h6>
        <input type="email" placeholder="Enter Your Email"  id="inpMail"  class="p-2 rounded-3 form-control">
        <span class="d-flex">
            <input type="password" placeholder="Enter Your Password"  id="passW"  class="p-2 rounded-3 form-control">
            <i class="fa fa-eye fs-5 mt-2" aria-hidden="true" style="margin-left: -30px;" id="showPW" onclick="show()"></i>
            <i class="fa fa-eye-slash fs-5 mt-2" aria-hidden="true" style=" margin-left: -30px; display:none" id="hidePW" onclick="hide()"></i>
        </span>
        <div class="ps-1">
            Forgot Password?
            <a href="#" class="fw-bold" style="color:#643a94">Reset it</a>
        </div>
        <div class="my-2 ps-1">
            New here? 
            <a href="signUp_Page.html" class="fw-bold mt-2" style="color:#643a94; ">Sign-up</a> to create a new account
        </div>
        <button onclick="myLogin()" class=" btn fw-bold rounded-3 mt-3" style="background-color:#40196D; color:white;">Login</button>

        <a href="index.html" class="text-decoration-none fw-bold text-center mt-4 " style="color:#6a4f89;">Home</a>
    </div>
  
    
   <script>
        const myLogin=()=>{
            var userEmail = inpMail.value
            var userPassword = passW.value
            allUsers = JSON.parse(localStorage.getItem("localStUsers"))
            inpMail.value=""
            passW.value=""
            let found = false
            let customerIndex
            for (let index = 0; index < allUsers.length; index++){
                if(userEmail===allUsers[index].email && userPassword===allUsers[index].password) {
                    found = true
                    customerIndex = index
                    break
                }
            }
            if (found==true) {
                localStorage.setItem("currentUser", userEmail)
                localStorage.setItem("customerIndex", customerIndex)
                window.location.href="userDashboardPage.html"
            }
            else{
             alert("Incorrect email or password! Try again.")
            } 
        }
        const show=()=>{
            showPW.style.display = "none"
            hidePW.style.display = "inline"
            passW.type = "text"
        }
        const hide=()=>{
            showPW.style.display = "inline"
            hidePW.style.display = "none"
            passW.type = "password"
        }
    </script>
</body>
</html>